<view class="profile-container">
  <!-- ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ -->
  <view class="user-section" wx:if="{{userInfo}}">
    <view class="user-card">
      <t-avatar 
        size="large" 
        image="{{userInfo.avatarUrl || ''}}"
        class="user-avatar"
      >
        {{userInfo.nickName ? userInfo.nickName.charAt(0) : 'ç”¨'}}
      </t-avatar>
      <view class="user-info">
        <view class="user-name">{{userInfo.nickName || 'ç”¨æˆ·'}}</view>
        <view class="user-desc">{{userInfo.grade || 'å°å­¦ç”Ÿ'}}</view>
      </view>
      
      <view class="user-stats">
        <view class="stat-item">
          <view class="stat-number">{{studyStats.totalPractices}}</view>
          <view class="stat-label">ç»ƒä¹ æ¬¡æ•°</view>
        </view>
        <view class="stat-item">
          <view class="stat-number">{{studyStats.averageAccuracy}}%</view>
          <view class="stat-label">å¹³å‡æ­£ç¡®ç‡</view>
        </view>
        <view class="stat-item">
          <view class="stat-number">{{studyStats.masteredWords}}</view>
          <view class="stat-label">æŒæ¡å•è¯</view>
        </view>
      </view>
    </view>
  </view>

  <!-- æœªç™»å½•çŠ¶æ€ -->
  <view class="login-section" wx:else>
    <view class="login-card">
      <view class="login-icon">ğŸ‘¤</view>
      <view class="login-title">æ¬¢è¿ä½¿ç”¨è¾…å¯¼åŠ©æ‰‹</view>
      <view class="login-desc">ç™»å½•åå¯æŸ¥çœ‹å­¦ä¹ è®°å½•å’Œé”™è¯¯å•è¯æœ¬</view>
      <t-button 
        theme="primary" 
        size="large" 
        bind:tap="goToLogin"
        class="login-btn"
      >
        ç«‹å³ç™»å½•
      </t-button>
    </view>
  </view>

  <!-- å­¦ä¹ è®°å½• -->
  <view class="records-section" wx:if="{{userInfo && studyRecords.length > 0}}">
    <view class="section-title">æœ€è¿‘ç»ƒä¹ è®°å½•</view>
    <t-cell-group>
      <t-cell 
        wx:for="{{studyRecords}}" 
        wx:key="index"
        title="{{item.title}}"
        description="{{item.description}}"
        right-icon="chevron-right"
        bind:click="viewRecord"
        data-index="{{index}}"
      >
        <view slot="note" class="record-score">
          <view class="score-text">{{item.accuracy}}%</view>
          <view class="score-label">æ­£ç¡®ç‡</view>
        </view>
      </t-cell>
    </t-cell-group>
  </view>

  <!-- é”™è¯¯å•è¯æœ¬ -->
  <view class="wrong-words-section" wx:if="{{userInfo && wrongWordsList.length > 0}}">
    <view class="section-title">é”™è¯¯å•è¯æœ¬ ({{wrongWordsList.length}}ä¸ª)</view>
    <t-cell-group>
      <t-cell 
        wx:for="{{wrongWordsList}}" 
        wx:key="index"
        title="{{item.word}}"
        description="é”™è¯¯æ¬¡æ•°: {{item.errorCount}}æ¬¡"
        right-icon="chevron-right"
        bind:click="practiceWrongWord"
        data-word="{{item.word}}"
      >
        <view slot="left-icon">
          <t-tag 
            size="small" 
            theme="{{item.status === 'mastered' ? 'success' : 'warning'}}"
            variant="light"
          >
            {{item.status === 'mastered' ? 'å·²æŒæ¡' : 'éœ€å¤ä¹ '}}
          </t-tag>
        </view>
      </t-cell>
    </t-cell-group>
  </view>

  <!-- åŠŸèƒ½èœå• -->
  <view class="menu-section" wx:if="{{userInfo}}">
    <t-cell-group>
      <t-cell 
        title="å­¦ä¹ ç»Ÿè®¡" 
        left-icon="chart-bar" 
        right-icon="chevron-right"
        bind:click="viewStatistics"
      />
      <t-cell 
        title="è®¾ç½®" 
        left-icon="setting" 
        right-icon="chevron-right"
        bind:click="openSettings"
      />
      <t-cell 
        title="å¸®åŠ©ä¸åé¦ˆ" 
        left-icon="help-circle" 
        right-icon="chevron-right"
        bind:click="openHelp"
      />
      <t-cell 
        title="é€€å‡ºç™»å½•" 
        left-icon="logout" 
        right-icon="chevron-right"
        bind:click="logout"
      />
    </t-cell-group>
  </view>
</view>

<!-- Toast ç»„ä»¶ -->
<t-toast id="t-toast" />

<!-- Dialog ç»„ä»¶ -->
<t-dialog id="t-dialog" /> 